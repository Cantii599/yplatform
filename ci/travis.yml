cache:
  directories:
    - /tmp/support-firecloud.cache
    - $HOME/.local
    - $HOME/.npm
    - $HOME/.pip-cache/
    - $HOME/Library/Caches/Homebrew
    - node_modules
before_install:
  - '[ "${TRAVIS_SUDO}" = "true" ] || export TRAVIS_NOSUDO_MARKER="-nosudo"'
  - ./ci/${TRAVIS_OS_NAME}${TRAVIS_NOSUDO_MARKER:-}/bootstrap
install:
  - npm install
script:
  - npm test

language:
  - node_js
node_js:
  - node

matrix:
  include:
    - os: linux
      dist: trusty
      sudo: false
      env: CACHE_NAME=linux-trusty-false
    - os: linux
      dist: trusty
      sudo: required
      env: CACHE_NAME=linux-trusty-required
    - os: osx
      osx_image: xcode8.3
      env: CACHE_NAME=osx-xcode8.3
