#!/usr/bin/env bash

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
TOP="$(cd ${DIR}/../.. && pwd)"
source ${TOP}/support/sh/common.inc.sh

#- aws-get-stack-param 1.0
## Usage: aws-get-stack-param STACK_NAME PARAM
## Echo stack param given a stack name.
##
##   -h, --help     Display this help and exit
##   -v, --version  Output version information and exit

while [[ $# -gt 0 ]]; do
    case "$1" in
        -h|--help)
            sh_script_usage
            ;;
        -v|--version)
            sh_script_version
            ;;
        -* )
            sh_script_usage
            ;;
        *)
            break
            ;;
    esac
done

STACK_NAME=$1
PARAM=$2
aws cloudformation describe-stacks --stack-name ${STACK_NAME} --output text --query "Stacks[0].Parameters[?ParameterKey=='${PARAM}'].{Value:ParameterValue}" 2>/dev/null
