#!/usr/bin/env bash
set -euo pipefail

# Run a NodeJS script with support for ES6-imports
# e.g. instead of `node some/script.js` use `node-esm some/script.js`
# See https://github.com/standard-things/esm

SUPPORT_FIRECLOUD_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

NPX_ARGS=
NPX_ARGS="${NPX_ARGS} --quiet"
NPX_ARGS="${NPX_ARGS} --package esm"

function main() {
    # require esm and run script
    eval "node -r esm ${!VAR_ARGS}"
}

source ${SUPPORT_FIRECLOUD_DIR}/sh/npx.inc.sh
